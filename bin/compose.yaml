# Run services for localdevelopment.
services:
  # Nginx
  nginx:
    image: "lisitsynalex/investment/web"
    ports:
      - 80:80
  # Backend
  gateway:
    image: "lisitsynalex/investment/gateway"
    environment:
      - PORT=8080
      - USER_SERVICE_HOST=users
      - USER_SERVICE_PORT=8082
      - STOCK_SERVICE_HOST=stock
      - STOCK_SERVICE_PORT=8083
  user:
    image: "lisitsynalex/investment/services/user"
    environment:
      - PORT=8082
  stock:
    image: "lisitsynalex/investment/services/stock"
    environment:
      - PORT=8083
  # Databases
  mongo:
    image: mongo
    restart: always
    ports:
      - 27017:27017
    environment:
      MONGO_INITDB_ROOT_USERNAME: root
      MONGO_INITDB_ROOT_PASSWORD: example
  mongo-express:
    image: mongo-express
    restart: always
    ports:
      - 8081:8081
    environment:
      ME_CONFIG_MONGODB_ADMINUSERNAME: root
      ME_CONFIG_MONGODB_ADMINPASSWORD: example
      ME_CONFIG_MONGODB_URL: mongodb://root:example@mongo:27017/
